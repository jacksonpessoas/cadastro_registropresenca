<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Cadastro de Presença</title>
   
<body>

<h2>Cadastro de Colaborador ou Líder</h2>

<form id="cadastroForm">
    <label for="funcao">Função:</label>
    <select id="funcao" name="funcao">
        <option value="colaborador">Colaborador</option>
        <option value="lider">Líder</option>
    </select>

    <label for="nome">Nome:</label>
    <input type="text" id="nome" name="nome" required>

    <label for="endereco">Endereço:</label>
    <input type="text" id="endereco" name="endereco" required>

    <label for="contato">Contato:</label>
    <input type="text" id="contato" name="contato" required>

    <label for="rg">RG:</label>
    <input type="text" id="rg" name="rg" required>

    <label for="cpf">CPF:</label>
    <input type="text" id="cpf" name="cpf" required>

    <label for="titulo">Título de Eleitor:</label>
    <input type="text" id="titulo" name="titulo" required>

    <label for="zona">Zona:</label>
    <input type="text" id="zona" name="zona" required>

    <label for="secao">Seção:</label>
    <input type="text" id="secao" name="secao" required>

    <div id="liderSection" style="display: none;">
        <label for="lider">Líder:</label>
        <select id="lider" name="lider">
            <!-- Aqui os nomes dos líderes serão carregados via JavaScript -->
        </select>
    </div>

    <button type="submit">Cadastrar</button>
</form>

<script>
    document.getElementById('funcao').addEventListener('change', function() {
        if (this.value === 'colaborador') {
            document.getElementById('liderSection').style.display = 'block';
        } else {
            document.getElementById('liderSection').style.display = 'none';
        }
    });

    document.getElementById('cadastroForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const formData = {
            funcao: document.getElementById('funcao').value,
            nome: document.getElementById('nome').value,
            endereco: document.getElementById('endereco').value,
            contato: document.getElementById('contato').value,
            rg: document.getElementById('rg').value,
            cpf: document.getElementById('cpf').value,
            titulo: document.getElementById('titulo').value,
            zona: document.getElementById('zona').value,
            secao: document.getElementById('secao').value,
            lider: document.getElementById('lider').value
        };

        fetch('https://script.google.com/macros/s/AKfycbw5dsl9aPZujjcqrrQ_eqy4FydvfOFKTzubHZnXaeFCGdAf8jRqITYppQGGm9BhV_c2/exec', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(formData)
        }).then(response => response.text())
          .then(data => alert(data))
          .catch(error => console.error('Erro ao cadastrar:', error));
    });

    // Função para carregar os líderes do Google Apps Script
    function carregarLideres() {
        fetch('https://script.google.com/macros/s/AKfycbw5dsl9aPZujjcqrrQ_eqy4FydvfOFKTzubHZnXaeFCGdAf8jRqITYppQGGm9BhV_c2/exec')
        .then(response => response.json())
        .then(lideres => {
            const liderSelect = document.getElementById('lider');
            lideres.forEach(lider => {
                const option = document.createElement('option');
                option.value = lider;
                option.text = lider;
                liderSelect.appendChild(option);
            });
        })
        .catch(error => console.error('Erro ao carregar líderes:', error));
    }

    // Carregar líderes ao iniciar a página
    carregarLideres();
</script>

</body>
</html>
